---
sidebar_position: 7
draft: false
description: 全面解析树莓派摄像头模块！从经典的500万像素OV5647到最新的1200万像素IMX477、AI摄像头及全局快门GS型号，支持可见光/红外版本与广角选择，适配所有CSI接口树莓派设备。提供详细安装指南（含静电防护与CSI连接器操作）、硬件规格对比（如传感器尺寸、像素、帧率）、软件配置（libcamera/Picamera2）、镜头推荐（C/CS与M12卡口）及同步捕捉技术（XVS/XHS引脚应用）。更有红外滤镜拆卸教程与机械图纸下载，助力摄影、机器视觉等应用开发。
keywords: [树莓派摄像头, Raspberry Pi Camera, 摄像头模块3, HQ摄像头, 全局快门GS, AI摄像头, CSI接口, 滚动快门, 同步捕捉, 红外滤镜, 镜头推荐, C/CS卡口, M12卡口, 树莓派Pico, 摄影应用, 机器视觉, libcamera, Picamera2, 传感器规格, 静态分辨率, 视频模式, 红外版本, 广角型号]
last_update: 
  date: 2025-12-20
---
import Normal from "../_normal.mdx";

# 摄像头

## 关于摄像头模块

树莓派官方推出了多款摄像头模块。

- **摄像头模块1**：一款500万像素摄像头，提供标准版（可见光）和NoIR版（可见光+红外）两种型号，具备标准视场角（FoV）。该设备已停止在树莓派官网销售。
- [**摄像头模块2**](#摄像头模块2)：800万像素摄像头，提供标准版和NoIR版，均采用标准视场角。
- [**摄像头模块3**](#摄像头模块3)：1200万像素摄像头，提供标准版和NoIR版。标准版与NoIR版均提供标准视场角和广角视场角版本，共计四种型号。
- [**高品质摄像头**](#高品质摄像头)：1200万像素摄像头，配备CS接口或M12接口版本以适配外接镜头。此型号不提供NoIR版本。
- [**AI摄像头**](./ai-camera.mdx)：1200万像素摄像头，为各类摄像头应用提供低延迟高性能AI功能。通过与[树莓派摄像头软件堆栈](../computers/camera-software.mdx)深度集成，用户可轻松部署自定义神经网络模型。此型号不提供无红外版本。
- [**全局快门摄像头**](#全局快门摄像头)：采用全局快门机制的150万像素摄像头。可同时捕捉场景中每个像素的光线，特别适合高速摄影。配备CS卡口接口，可搭配外接镜头使用。此型号不提供无红外版本。

欲比较各摄像头硬件特性，请参阅[硬件规格](#硬件规格)。

:::tip
树莓派摄像头模块兼容所有配备CSI接口的树莓派计算机。
:::

有关摄像头软件的信息，请参阅[摄像头软件文档](../computers/camera-software.mdx)。

## 安装树莓派摄像头

树莓派摄像头的安装流程在所有摄像头与主板组合中基本一致。连接器存在些许差异，具体区别将在后续步骤中说明。

### 步骤1：准备工作

:::warning
摄像头易受静电影响。操作PCB前请进行接地处理。若无接地带，可触碰水龙头等金属物体实现接地。
:::

完成本操作需准备以下物品：

* 带摄像头接口的树莓派主板
* 树莓派摄像头

    部分摄像头镜头可能覆盖有蓝色半透明塑料薄膜，此为运输保护措施，请轻柔撕除。

* 适配摄像头与主板的连接线
  * 所有树莓派摄像头均采用标准15针接口。
  * 树莓派4及以下旗舰型号采用标准15针接口。此类主板请使用摄像头附带的标准-标准摄像头线缆。
  * 树莓派5、所有树莓派Zero型号及计算模块I/O板采用迷你22针接口。此类主板需使用[标准-迷你摄像头线缆](https://www.raspberrypi.com/products/camera-cable/)。
  * 部分计算模块开发套件附带计算模块摄像头显示适配器（CMCDA）板，可将IO板上的迷你22针接口转换为标准15针接口。

### 步骤2：将线缆连接至树莓派

:::tip
若计划在树莓派5上使用主动散热器，请在安装散热器前将线缆连接至设备摄像头接口。安装散热器后，摄像头接口可能难以触及。
:::

1. 关闭树莓派并断开电源。
2. 定位树莓派主板上的摄像头接口。

    以下说明基于您手持树莓派主板时芯片和接口朝上、树莓派标识与主板名称方向正确的情况。对于顶部无标识的树莓派Zero主板，请将GPIO接口沿远离您的边缘方向放置。

    * 在树莓派Zero设备上，摄像头接口位于右侧短边，与SD卡槽相对。

    * 在树莓派4之前的旗舰型号上，摄像头接口位于离您最近的边缘，介于HDMI接口和音频插孔之间，标有CAMERA字样。
    * 在树莓派4上，摄像头接口位于离您最近的边缘，介于微型HDMI接口与音频插孔之间，标注为CAMERA。
    * 在树莓派5上，两个摄像头和显示接口位于离您最近的边缘，介于微型HDMI接口与以太网端口之间，分别标注为CAM/DISP0和CAM/DISP1。您可任选其中一个接口连接摄像头。
    * 在树莓派计算模块1/3/3+的IO板上，两个摄像头接口位于左侧边缘（即IO板上最靠近logo的边缘）靠近您的末端。它们标注为CAM0和CAM1。您可任选其中一个接口连接摄像头。
    * 在树莓派计算模块4的IO板上，两个摄像头接口位于最左侧角落。标记为CAM0和CAM1。您可任选其中一个接口连接摄像头。
    * 在树莓派计算模块5的I/O板上，两个摄像头接口位于最远边缘的左端。标记为CAM/DISP0和CAM/DISP1。您可任选其中一个接口连接摄像头。

3. 打开接口盖板。

    a. 若有薄膜条固定盖板，请将其移除。

    b. 轻柔地将盖板从接口处向外拉出，直至触及阻力点。此时盖板可自由活动。

    c. 将盖板轻微倾斜远离接口开口。

4. 将摄像头线缆金属触点端朝向远离盖板的方向插入接口。

    确保摄像头线缆完全插入连接器且保持笔直，使所有触点正确对齐。注意避免线缆弯折角度过大。

5. 将盖板向线缆方向倾斜，按压至连接器直至听到咔嗒声锁定到位。

    挡板可固定线缆位置，确保连接器针脚与线缆金属触点紧密接触。

拆卸线缆时请按上述步骤逆向操作。


### 步骤3：将电缆连接至摄像头

我们的摄像头已预装标准-标准电缆。若您已拆下该电缆或需更换其他电缆，请完成以下步骤。

摄像头连接器位于电路板与镜头相对的一侧。请将摄像头镜头朝下或背离您握持。

1. 打开连接器上的盖板。

    a. 轻柔地将挡板从接口处向外拉出，直至触及阻力点。此时挡板可自由活动。

    b. 将挡板轻微向接口开口外侧倾斜。

2. 将摄像头线缆端口（金属触点朝向摄像头主板方向）插入接口。

    确保线缆端口完全插入接口且保持垂直，使所有触点正确对齐。注意避免柔性线缆产生锐角弯折。

3. 将挡板向线缆方向倾斜并按压至连接器，直至听到咔嗒声确认到位。

    挡板可固定线缆位置，确保连接器针脚与线缆金属触点紧密接触。

拆卸线缆时请按相反步骤操作。

### 步骤4：准备软件

1. 重新连接树莓派电源并启动设备。

2. 参照[系统更新指南](../computers/os.mdx#升级软件)确保内核及应用程序均已更新至最新版本。.

3. 执行[`rpicam-apps`](../computers/camera-software.mdx#rpicam-apps)的安装说明。

4. （可选）若需使用Picamera2 Python库，请参照[Picamera2 Python库](https://datasheets.raspberrypi.com/camera/picamera2-manual.pdf)的安装指南。


## 摄像头模块2

这款 800 万像素摄像头采用索尼 IMX219 传感器，分辨率为 3280 × 2464 像素。具备可调焦功能，最长曝光时间可达 11.76 秒。

摄像头模块2提供以下版本：

* [**标准版**](https://www.raspberrypi.com/products/camera-module-v2/)。此版本仅捕捉可见光，红外光被滤除。
* [**无红外版**](https://www.raspberrypi.com/products/pi-noir-camera-v2/)。此版本未配备红外滤光片，可同时捕捉可见光与红外光。配合红外照明设备可实现暗光环境拍摄，或搭配随附的蓝色滤光片监测绿色植物健康状况。

有关本摄像头的详细硬件特性与功能说明，请参阅[硬件规格](#硬件规格)。


## 摄像头模块3

这款 [1200万像素摄像头](https://www.raspberrypi.com/products/camera-module-3/) 采用索尼IMX708传感器，分辨率为4608 × 2592像素。具备[电动自动对焦](https://www.raspberrypi.com/news/new-autofocus-camera-modules/)功能，最长可支持112秒曝光时间。

摄像头模块3提供以下版本：

* 标准版，常规视场角(FoV)
* 标准版，广角视场角
* NoIR版，常规视场角
* NoIR版，广角视场

标准型号仅捕捉可见光，红外光被滤除。NoIR型号未配备红外滤光片，可同时捕捉可见光与红外光。配合红外照明使用NoIR摄像头可在黑暗中成像，或搭配随附的蓝色滤光片监测绿色植物健康状况。

<img src="/img/accessories/camera/cm3.jpg" alt="摄像头模块3标准版与广角版" />
*摄像头模块3（左）与摄像头模块3广角版（右）*


<img src="/img/accessories/camera/cm3_noir.jpg" alt="摄像头模块3无红外标准版与广角版" />
*摄像头模块3无红外版（左）与摄像头模块3无红外广角版（右）*

有关该摄像头硬件特性与功能的详细信息，请参阅[硬件规格](#硬件规格)。

:::tip
[现有证据](https://github.com/raspberrypi/libcamera/issues/43)表明摄像头模块3可能在CSI时钟频率谐波频率下产生射频干扰。该射频干扰频率范围可能干扰GPS L1频段（1575 MHz）。详情及建议的解决方法请参阅[Github讨论帖](https://github.com/raspberrypi/libcamera/issues/43)。
:::

### 传输特性

摄像头模块3中的IMX708传感器具有以下光谱灵敏度特性。

<img src="/img/accessories/camera/cm3-filter.png" alt="摄像头模块3透射曲线图" width="65%"/>

## 全局快门摄像头

160万像素[全局快门摄像头](https://www.raspberrypi.com/products/raspberry-pi-global-shutter-camera/)可捕捉快速移动的物体并最大限度减少失真。其核心采用索尼IMX296传感器，分辨率达1456×1088像素。

摄像头配备C/CS卡口，兼容多种镜头。更多信息请参阅[镜头](#推荐镜头)。

通过板载外部触发接口脉冲信号即可启动全局快门（GS）摄像头。此功能支持多台全局快门摄像头同步工作。更多信息请参阅 [全局快门摄像头的外部触发功能](#全局快门摄像头的外部触发器)。

<img src="/img/accessories/camera/gs-camera.jpg" alt="GS摄像头" />
*全局快门摄像头*

有关本摄像头硬件特性与功能的详细信息，请参阅[硬件规格](#硬件规格)。

### 滚动快门还是全局快门？

大多数数码摄像头（包括我们其他摄像头模块）采用**滚动快门**：逐行扫描拍摄图像后输出结果。此机制在某些场景下会产生畸变效应。例如拍摄旋转螺旋桨时，图像可能呈现波光粼粼的效果而非物体旋转的动态感。这是因为在摄像头扫描场景的极短时间内，螺旋桨叶片已完成位置变化。

而**全局快门**（如我们全局快门摄像头模块所采用）则不同。它能同时捕捉场景中每个像素的光线，因此拍摄螺旋桨叶片等物体时不会产生相同畸变。

这种特性非常实用，它使拍摄螺旋桨叶片等高速运动物体变得容易；我们还能同步多台摄像头，在精确同一时刻完成拍摄。其优势包括：在捕捉立体图像时能最大限度减少失真——若左眼看到的物体运动尚未出现在右眼视野中，会导致人脑产生混淆。树莓派全局快门摄像头还支持更短的曝光时间——在光照充足时可达30微秒——远优于滚动快门摄像头，这使其在高速摄影领域具有显著优势。

:::tip
全局快门摄像头的图像传感器对角线有效成像区域为6.3毫米，尺寸与树莓派HQ摄像头相当。但其像素尺寸更大，能收集更多光线。大像素尺寸与低像素数量在机器视觉应用中尤为珍贵：传感器像素越多，实时图像处理难度越大。为解决此问题，许多应用会缩小图像尺寸并裁剪画面。而全局快门摄像头配合适配镜头放大倍率时，其较低分辨率与大像素尺寸特性可实现原生图像捕捉，无需额外处理。
:::

### 透射特性

全局快门摄像头采用Hoya CM500红外滤光片，其透射特性如图所示：

<img src="/img/accessories/camera/hoyacm500.png" alt="CM500透射曲线图" width="65%"/>

若需增强摄像头对红外光的敏感度，可移除红外滤光片。此操作不可逆且将导致保修失效。更多信息请参阅[红外滤光片](#红外滤光片)。

移除滤光片后，树莓派全局快门摄像头的透射特性如下：

<img src="/img/accessories/camera/gs.png" alt="无红外截止滤光片时的GS摄像头透射曲线图" idth="65%"/>

## 高品质摄像头

这款1200万像素[高品质摄像头](https://www.raspberrypi.com/products/raspberry-pi-high-quality-camera/)配备M12卡口或C/CS卡口，可兼容多种镜头。更多信息请参阅[镜头](#推荐镜头)。该摄像头采用索尼IMX477传感器，分辨率达4056 × 3040像素，最长可记录670.74秒曝光时间。

通过脉冲式外部触发器可启动高品质摄像头，此功能支持多台高品质摄像头同步拍摄。详情参见[同步拍摄](#同步捕捉)。

<img src="/img/accessories/camera/hq.jpg" alt="M12接口与C/CS接口版本的高品质摄像头" />
*高品质摄像头，M12接口（左）与C/CS接口（右）*


有关本摄像头硬件特性与功能的详细信息，请参阅[硬件规格](#硬件规格)。

### 透射特性

高品质摄像头采用Hoya CM500红外滤光片，其透射特性如图所示：

<img src="/img/accessories/camera/hoyacm500.png" alt="CM500透射曲线图" width="65%"/>

若需增强摄像头对红外光的敏感度，可移除红外滤光片。此操作不可逆且将导致保修失效。更多信息请参阅[红外滤光片](#红外滤光片）。

移除滤光片后，树莓派高品质摄像头的透射特性如下：

<img src="/img/accessories/camera/hq.png" alt="未安装红外截止滤光片的高品质摄像头透射曲线图" width="65%"/>

## 推荐镜头
建议将以下镜头与我们的 HQ 和 GS 摄像头配合使用。

:::note[注意]
HQ 摄像头有 C/CS 卡口和 M12 卡口两种型号，而 GS 摄像头只有 C/CS 卡口。
:::

### C/CS 镜头
我们推荐两款镜头：由CGL电子有限公司生产的6毫米广角镜头和16毫米远摄镜头。您可通过就近的[授权经销商](https://www.raspberrypi.com/products/raspberry-pi-high-quality-camera/)购买这些镜头。

<table>
    <tr align="center">
        <td colspan="2"></td>
        <td>16 毫米长焦镜头</td>
        <td>6 毫米广角镜头</td>
    </tr>
    <tr align="center">
        <td colspan="2">分辨率</td>
        <td>1000 万像素</td>
        <td>300 万像素</td>
    </tr>
    <tr align="center">
        <td colspan="2">图像格式</td>
        <td>1"</td>
        <td>1/2"</td>
    </tr>
    <tr align="center">
        <td colspan="2">光圈</td>
        <td>F1.4 至 F16</td>
        <td>F1.2</td>
    </tr>
    <tr align="center">
        <td colspan="2">安装</td>
        <td>C</td>
        <td>CS</td>
    </tr>
    <tr align="center">
        <td rowspan="2">视场角 H°×V° (D°)</td>
        <td>HQ</td>
        <td>22.2°×16.7° (27.8°)</td>
        <td>55°×45° (71°)</td>
    </tr>
    <tr align="center">
        <td>GS</td>
        <td>17.8°×13.4° (22.3)</td>
        <td>45°×34° (56°)</td>
    </tr>
    <tr align="center">
        <td colspan="2">背面焦距</td>
        <td>17.53 毫米</td>
        <td>7.53 毫米</td>
    </tr>
    <tr align="center">
        <td colspan="2">外径</td>
        <td>0.2m</td>
        <td>0.2m</td>
    </tr>
    <tr align="center">
        <td colspan="2">尺寸</td>
        <td>φ39×50毫米</td>
        <td>φ30×34毫米</td>
    </tr>
</table>

### M12镜头

<img src="/img/accessories/camera/m12-lens.jpg" alt="M12 镜片" />

我们推荐三种由[高佳光学](https://www.gaojiaoptotech.com/)制造的镜片。这些镜片可从离您最近的[授权经销商](https://www.raspberrypi.com/products/raspberry-pi-high-quality-camera/)处购买。

<table>
    <tr align="center">
        <td></td>
        <td>8 毫米</td>
        <td>25 毫米</td>
        <td>鱼眼</td>
    </tr>
    <tr align="center">
        <td>分辨率</td>
        <td>1200 万像素</td>
        <td>500 万像素</td>
        <td>1500 万像素</td>
    </tr>
    <tr align="center">
        <td>图像格式</td>
        <td>1/1.7"</td>
        <td>1/2"</td>
        <td>1/2.3"</td>
    </tr>
    <tr align="center">
        <td>光圈</td>
        <td>F1.8</td>
        <td>F2.4</td>
        <td>F2.5</td>
    </tr>
    <tr align="center">
        <td>安装</td>
        <td colspan="3">M12</td>
    </tr>
    <tr align="center">
        <td>HQ 视场角 H°×V° (D°)</td>
        <td>49°×36° (62°)</td>
        <td>14.4°×10.9° (17.9)°</td>
        <td>140°×102.6° (184.6°)</td>
    </tr>
</table>

## 同步捕捉

高品质（HQ）摄像头支持同步捕获。
一台摄像头（"源摄像头"）可配置为在启动帧捕获时在其XVS（垂直同步）引脚上生成一个脉冲。
其他（"目标"）摄像头可以监听此脉冲，并在源摄像头捕获帧的同时进行捕获。

此方法已被 [软件摄像头同步](../computers/camera-software.mdx#软件摄像头同步)所取代，该方法可在无需额外线缆的情况下实现长距离操作，并具备亚毫秒级精度。但当摄像头物理距离较近时，可使用有线同步。

:::note[注意]
您也可以在同步模式下操作全局快门（GS）摄像头。但此时源摄像头会额外记录一帧画面。对于GS摄像头，我们建议改用[外部触发源](#全局快门摄像头的外部触发器)。GS摄像头与高品质（HQ）摄像头无法实现同步。
:::

### 连接摄像头

将导线焊接到每个摄像头的XVS测试点，并将它们连接在一起。

将导线焊接到每个摄像头的GND测试点，并将它们连接在一起。

*仅适用于GS摄像头*，您必须将每个摄像头的XHS（水平同步）测试点相互连接。对于任何希望作为接收端的GS摄像头，请用焊锡将MAS焊盘的两部分短接。

:::note[注意]
本文件较早版本曾建议为XVS添加外部上拉电阻。此建议不再适用。请确保使用Raspberry Pi OS最新版本，并为所有连接的摄像头设置`always-on`属性。
:::

### 驱动程序配置

配置摄像头驱动程序，使其在非流媒体传输时保持1.8V电源供电，并可选地选择源设备和接收设备角色。

#### 对于HQ摄像头

编辑 `/boot/firmware/config.txt`。将 `camera_auto_detect=1` 改为 `camera_auto_detect=0`。

对于源摄像头，添加以下行：
```ini
dtoverlay=imx477,always-on,sync-source
```

或对于汇：
```ini
dtoverlay=imx477,always-on,sync-sink
```

在 Raspberry Pi 5、CM4 或 CM5 上使用 CAM0 端口时，在该行末尾添加 `,cam0`（不带空格）。如果同一台 Raspberry Pi 上连接了两台摄像头，则需要两行 `dtoverlay` 配置，其中仅一行以 `,cam0` 结尾。

或者，如果您希望在运行时交换摄像头的角色（且它们未连接到同一台 Raspberry Pi），请省略上述 `,sync-source` 或 `,sync-sink`。相反，您可以在启动每个摄像头前设置模块参数：

对于带有源摄像头的 Raspberry Pi：
```sh
echo 1 | sudo tee /sys/module/imx477/parameters/trigger_mode
```

对于带有目标摄像头的树莓派：
```sh
echo 2 | sudo tee /sys/module/imx477/parameters/trigger_mode
```
每次系统启动时都需要执行此操作。

#### 对于 GS 摄像头

编辑 `/boot/firmware/config.txt`。将 `camera_auto_detect=1` 改为 `camera_auto_detect=0`。

对于源或汇，添加以下行：

```sh
dtoverlay=imx296,always-on
```

在 Raspberry Pi 5、CM4 或 CM5 上使用 CAM0 端口时，在该行末尾添加 `,cam0`，且不留空格。如果同一台 Raspberry Pi 上有两台摄像头，则需要两行 `dtoverlay`，其中仅一行以 `,cam0` 结尾。

在 GS 摄像头上，接收端角色通过 MAS 引脚启用，无法通过软件配置（"trigger_mode" 和 "sync-sink" 与 [外部触发方法](#全局快门摄像头的外部触发器) 相关，此模式下不得设置）。

### Libcamera 配置

如果所有摄像头未能在 1 秒内启动，`rpicam`应用程序可能会超时。为避免此情况，请编辑任何搭载 sink 摄像头的树莓派上的配置文件。

在 Raspberry Pi 5 或 CM5 上：
```sh
cp /usr/share/libcamera/pipeline/rpi/pisp/example.yaml timeout.yaml
```

在其他 Raspberry Pi 型号上：
```sh
cp /usr/share/libcamera/pipeline/rpi/vc4/rpi_apps.yaml timeout.yaml
```

现在编辑副本。在两种情况下，删除 `"camera_timeout_value_ms":` 行中的 `#`（注释），并将数字改为 `60000`（60 秒）。

### 启动摄像头

运行以下命令以启动汇：

```sh
export LIBCAMERA_RPI_CONFIG_FILE=timeout.yaml
rpicam-vid --frames 300 --qt-preview -o sink.h264
```

等待几秒钟，然后运行以下命令以启动源：

```sh
rpicam-vid --frames 300 --qt-preview -o source.h264
```

帧应保持同步。使用 `--frames` 确保捕获的帧数相同，且录制文件的长度完全一致。
先运行 汇 可确保不会丢失任何帧。

:::note[注意]
在使用 GS 摄像头同步模式时，汇记录的帧数不会与源完全相同。**源会在 sink 开始记录前多记录一帧**。因此，您需要使用 `--frames` 选项指定 sink 少记录一帧。
:::


## 全局快门摄像头的外部触发器

全局快门（GS）摄像头可通过外部脉冲触发板载外部触发接口（板载标记为XTR）实现外部触发。多个摄像头可连接至同一脉冲信号，从而提供同步两台摄像头的替代方案。

曝光时间等于低脉冲宽度时间加上 14.26us 的额外时间，即 10000us 的低脉冲导致 10014.26us 的曝光时间。帧频直接受控于对引脚的脉冲频率。PWM 频率为 30Hz 时，帧频为每秒 30 帧。

<img src="/img/accessories/camera/external_trigger.jpg" alt="显示脉冲格式的图片" width="80%" />

### 准备工作
:::warning[警告]
本修改包括拆除 SMD 焊接部件。除非您认为自己有能力完成此改装，否则不应尝试。焊接到摄像头电路板时，请取下塑料后盖，以免损坏电路板。
:::

如果电路板上安装了晶体管 Q2（如下图中蓝色所示），则需要从电路板上拆下 R11（如下图中红色所示）。它将 GP1 连接到 XTR，如果不取下 R11，摄像头将无法在外部触发模式下工作。元件位置如下所示。

<img src="/img/accessories/camera/resistor.jpg" alt="显示待拆除电阻的图片" width="50%" />

接下来，将一根导线焊接到 GS 摄像头电路板上的 XTR 和 GND 连接点上。请注意，XTR 是 1.8V 输入电压，因此可能需要电平转换器或电位分配器。

我们可以使用树莓派Pico来提供触发器。通过 1.5kΩ 电阻器将任何 Pico GPIO 引脚（本例中使用 GP28）连接至 XTR。同时在 XTR 和 GND 之间连接一个 1.8kΩ 电阻器，以将高逻辑电平降至 1.8V。接线图如下所示。

<img src="/img/accessories/camera/pico_wiring.jpg" alt="显示树莓派Pico接线的图片" width="50%" />

#### 树莓派Pico Micropython代码
```py
from machine import Pin, PWM

from time import sleep

pwm = PWM(Pin(28))

framerate = 30
shutter = 6000  # In microseconds

frame_length = 1000000 / framerate
pwm.freq(framerate)

pwm.duty_u16(int((1 - (shutter - 14) / frame_length) * 65535))
```

低脉冲宽度等于快门时间，PWM 频率等于帧频。

:::note[注意]
在本示例中，引脚 28 用于连接 GS 摄像头板上的 XTR 触摸点。
:::

### 摄像头驱动程序配置

此步骤仅在您使用多台通过XTR并联连接的摄像头时需要执行。

编辑 `/boot/firmware/config.txt` 文件。将 `camera_auto_detect=1` 修改为 `camera_auto_detect=0`。

```ini
dtoverlay=imx296,always-on
```

若在 Raspberry Pi 5、CM4 或 CM5 上使用 CAM0 端口，需在该行末尾添加 `,cam0`（不带空格）。若两台摄像头均连接至同一台 Raspberry Pi，则需添加两行 dtoverlay，其中仅一行以 `,cam0` 结尾。

如果外部触发器不会立即启动，您还需要增加 libcamera 超时设置 [如上所述](#libcamera-配置)。。

### 启动摄像头

启用外部触发：

```sh
echo 1 | sudo tee /sys/module/imx296/parameters/trigger_mode
```

在 Pico 上运行代码，然后启动摄像头：

```sh
rpicam-hello -t 0 --qt-preview --shutter 3000
```

每次 Pico 脉冲引脚时，它都应捕获一帧图像。然而，如果未设置 `--gain` 和 `--awbgains` 参数，部分帧将被丢弃，以允许自动增益控制（AGC）和自动白平衡（AWB）算法稳定下来。

:::note[注意]
在运行 `rpicam-apps` 时，请始终指定一个固定的快门持续时间，以确保 AGC 不会尝试调整摄像头的快门速度。该值并不重要，因为它实际上由外部触发脉冲控制。
:::

## 红外滤光片

高画质摄像头和全局快门摄像头都含有红外滤光镜，可降低摄像头对红外光的敏感度，使户外照片看起来更自然。不过，您也可以去掉滤光片：

* 增强某些摄影类型的色彩，例如植物、水和天空的图像
* 在有红外光照射的地方提供夜视效果

### 移除滤镜

:::warning
**此过程不能颠倒**：固定滤光片的粘合剂经不起抬起和更换，虽然红外滤光片厚约 1.1 毫米，但取出时可能会破裂。**取下滤镜将导致产品保修失效**。
:::

您可以从 HQ 和 GS 摄像机上取下滤镜。HQ 摄像机的演示如下。

<img src="/img/accessories/camera/FILTER_ON_small.jpg" alt="小滤镜" width="65%" />

:::important
为保护传感器免受空气影响，请确保在清洁无尘的环境中操作。
:::

1. 拧下主电路板底部的两个 1.5 毫米六角锁匙。小心不要让垫圈滚落。
<img src="/img/accessories/camera/SCREW_REMOVED_small.jpg" alt="拆下小螺钉" width="65%" />

2. 外壳与PCB之间有一层略带粘性的垫片，需要施加一定力才能分离。可尝试用异丙醇或热源（约20-30°C）软化粘合剂。
3. 当粘合剂松动后，将电路板抬起并平放于极其洁净的表面，确保传感器不接触该表面。
<img src="/img/accessories/camera/FLATLAY_small.jpg" alt="平放" width="65%" />

4. 镜头朝上，将卡口放在平坦的表面上。
<img src="/img/accessories/camera/SOLVENT_small.jpg" alt="溶剂" width="65%" />

5. 为了最大限度地降低滤镜破裂的风险，请使用笔头或类似的软塑料物品，仅在玻璃与铝材连接的最边缘向下按压滤镜。胶水会断裂，滤镜就会从镜头支架上脱落。
<img src="/img/accessories/camera/REMOVE_FILTER_small.jpg" alt="取下滤镜" width="65%" />

6. 鉴于更换镜头会暴露传感器，此时您可以粘贴一个透明滤镜（例如 OHP 塑料），以尽量减少灰尘进入传感器腔的机会。
7. 更换电路板上的主外壳。确保将外壳与电路板上的垫圈重新对齐。
8. 先戴上尼龙垫圈，以防损坏电路板。
9. 然后装上钢垫圈，以防止损坏尼龙垫圈。拧下两个六角锁匙。只要垫圈安装顺序正确，就不需要拧得很紧。
<img src="/img/accessories/camera/FILTER_OFF_small.jpg" alt="关闭滤镜" width="65%" />

:::note[注意]
要将滤镜粘回原位并使设备恢复正常光学照摄像头功能可能会很困难，甚至不可能。
:::

## 硬件规格
|  | 摄像头模块v1 | 摄像头模块v2 | 摄像头模块3 | 摄像头模块3广角型 | 高清摄像头  | AI摄像头 | GS摄像头 |
| -- | -- | -- | -- | -- | -- | -- | -- |
| 净价 | $25 | $25 | $25 | $35 | $50 | $70 | $50 |
| 尺寸 | 约 25 × 24 × 9 毫米 | 约 25 × 24 × 24 × 9 毫米 | 约 25 × 24 × 24 × 11.5 毫米 | 约 25 × 24 × 24 × 12.4 毫米 | 38 x 38 x 18.4 毫米(不包括镜头) | 25 x 24 x 11.9 毫米 | 38 x 38 x 19.8 毫米(带适配器和防尘盖时为 29.5 毫米) |
| 重量 | 3g | 3g | 4g | 4g | 30.4g | 6g | 34g （带适配器和防尘盖时为 41g） |
| 静态分辨率 | 500 万像素 | 800 万像素 | 1,190 万像素 | 1,190 万像素 | 1,230 万像素 | 1230 万像素 | 158 万像素 |
| 视频模式 | 1080p30、720p60 和 640 × 480p60/90 | 1080p47、1640 × 1232p41 和 640 × 480p206 | 2304 × 1296p56、2304 × 1296p30 HDR、1536 × 864p120 | 2304 × 1296p56，2304 × 1296p30 HDR，1536 × 864p120 | 2028 × 1080p50、2028 × 1520p40 和 1332 × 990p120 | 2280 x 1088p30、4056 x 3040p10 | 1456 x 1088p60 |
| 传感器 | OmniVision OV5647 | 索尼 IMX219 | 索尼 IMX708 | 索尼 IMX708 | 索尼 IMX477 | 索尼 IMX500 | 索尼 IMX296 |
| 传感器分辨率 | 2592 × 1944 像素 | 3280 × 2464 像素 | 4608 x 2592 像素 | 4608 x 2592 像素 | 4056 x 3040 像素 | 4056 x 3040 像素 | 1456 x 1088 像素 |
| 传感器图像区域 | 3.76 × 2.74 毫米 | 3.68 x 2.76 毫米（对角线 4.6 毫米） | 6.45 x 3.63 毫米（对角线 7.4 毫米） | 6.45 x 3.63 毫米（对角线 7.4 毫米） | 6.287 毫米 x 4.712 毫米（对角线长 7.9 毫米） | 6.287 毫米 x 4.712 毫米（对角线长 7.9 毫米） | 6.3 毫米对角线 |
| 像素尺寸 | 1.4 微米 × 1.4 微米 | 1.12 微米 x 1.12 微米 | 1.4 微米 x 1.4 微米 | 1.4 微米 x 1.4 微米 | 1.55 微米 x 1.55 微米 | 1.55 微米 x 1.55 微米 | 3.45 微米 x 3.45 微米 |
| 光学尺寸 | 1/4" | 1/4" | 1/2.43" | 1/2.43" | 1/2.3" | 1/2.3" | 1/2.9" |
| 聚焦 | 固定式 | 可调 | 电动 | 电动 | 可调 | 可调 | 可调 |
| 景深 | 约 1 米至∞ | 约 10 厘米至 ∞ | 约 10 厘米至 ∞ | 约 5 厘米至 ∞ | 不适用 | 约 20 厘米至 ∞ | 不适用 |
| 焦距 | 3.60 毫米 ± 0.01 | 3.04 毫米 | 4.74 毫米 | 2.75 毫米 | 取决于镜头 | 4.74 毫米 | 取决于镜头 |
| 水平视场角 (FoV) | 53.50 ± 0.13 度 | 62.2 度 | 66 度 | 102 度 | 取决于镜头 | 66 ±3 度 | 取决于镜头 |
| 垂直视场角 (FoV) | 41.41 ± 0.11 度 | 48.8 度 | 41 度 | 67 度 | 取决于镜头 | 52.3 ±3 度 | 取决于镜头 |
| 焦距比 (F档) | F2.9 | F2.0 | F1.8 | F2.2 | 取决于镜头 | F1.79 | 取决于镜头 |
| 最长曝光时间（秒） | 3.28 | 11.76 | 112 | 112 | 670.74 | 112 | 15.5 |
| 镜头安装 | 不适用 | 不适用 | 不适用 | 不适用 | C/CS 或 M12 安装 | 不适用 | C/CS |
| 是否提供 NoIR 版本？ | 是 | 是 | 是 | 是 | 否 | 否 | 否 |

## 高级信息

本节为高级用户提供信息。

### 机械图纸与原理图

机械图纸与原理图可在产品信息门户的以下位置获取：

* [摄像头模块2](https://pip.raspberrypi.com/categories/652-raspberry-pi-camera-module-2)
* [摄像头模块3](https://pip.raspberrypi.com/categories/786-raspberry-pi-camera-module-3)
* [HQ摄像头模块](https://pip.raspberrypi.com/categories/659-raspberry-pi-high-quality-camera)
* [GS摄像头模块](https://pip.raspberrypi.com/categories/810-raspberry-pi-global-shutter-camera)

:::tip
摄像头模块3的电路板尺寸和安装孔位与摄像头模块2完全一致。但由于传感器模块尺寸和位置的变更，该模块在机械结构上与树莓派Zero外壳的摄像头盖不兼容。
:::

此外，下图展示了树莓派CSI摄像头接口的原理图。

### 引脚分配信息

本节内容用于理解摄像头接口各引脚的功能。

#### 定位第1引脚

FPC接口上第1引脚的位置取决于硬件配置。

以下描述假设您手持树莓派主板时，芯片和接口朝上，且树莓派徽标方向正确。对于顶部无徽标的树莓派Zero主板，请将主板沿远离您的边缘放置GPIO接口。

* 在树莓派旗舰型号及树莓派Zero设备上，第1针脚为最远离用户且最靠近GPIO接口的引脚。
* 在树莓派计算模块I/O板上，第1针脚标有小圆圈或圆点（具体标记形式因型号而异）。

当镜头朝下、连接器朝右握持树莓派摄像头板时，第1针脚即为最靠近您的位置。

#### 摄像头接口引脚排列（15针）

此为树莓派5之前旗舰型号使用的15针摄像头串行接口（CSI）连接器引脚排列。
该连接器兼容安费诺SFW15R-2STE1LF规格。

信号方向以树莓派主板视角为准。
I2C总线（SCL和SDA）在树莓派主板上被上拉至3.3V。

GPIO引脚的功能与方向取决于具体使用的摄像头模块。通常`CAM_IO0`作为高电平有效电源使能引脚。部分产品未配备`CAM_IO1`引脚。


| 引脚 | 名称 | 描述 | 方向/类型 |
| -- | -- | -- | -- |
| 1 | GND | - | 接地 |
| 2 | CAM_DN0 | D-PHY通道0（负向） | 输入，D-PHY |
| 3 | CAM_DP0 | D-PHY通道0（正向） | 输入，D-PHY |
| 4 | GND | - | 接地 |
| 5 | CAM_DN1 | D-PHY通道1（负向） | 输入，D-PHY |
| 6 | CAM_DP1 | D-PHY通道1（正向） | 输入，D-PHY |
| 7 | GND | -                             | 接地 |
| 8 | CAM_CN | D-PHY 时钟（负极） | 输入，D-PHY |
| 9 | CAM_CP | D-PHY 时钟（正极） | 输入，D-PHY |
| 10 | GND | - | 接地 |
| 11 | CAM_IO0 | GPIO（例如电源使能） | 双向，3.3 V |
| 12 | CAM_IO1 | GPIO（例如时钟、LED） | 双向，3.3 V |
| 13 | SCL | I2C时钟 | 双向，3.3 V |
| 14 | SDA | I2C数据 | 双向，3.3 V |
| 15 | 3V3 | 3.3 V电源 | 输出 |

<img src="/img/accessories/camera/RPi-S5-conn.png" alt="摄像头连接器" width="70%" />


#### 摄像头接口引脚排列（22针）

此为树莓派Zero系列、计算模块I/O板以及自树莓派5起旗舰机型所采用的22针摄像头串行接口（CSI）连接器的引脚排列。
该连接器兼容安费诺F32Q-1A7H1-11022型号。

信号方向以树莓派主板视角为准。
I2C总线（SCL和SDA）在树莓派主板上被上拉至3.3V。

GPIO引脚的功能与方向取决于具体使用的摄像头模块。通常`CAM_IO0`作为高电平有效电源使能引脚。部分产品未配备`CAM_IO1`引脚。


| 引脚 | 名称 | 描述 | 方向/类型 |
| -- | -- | -- | -- |
| 1 | GND | - | 接地 |
| 2 | CAM_DN0 | D-PHY通道0（负极） | 输入，D-PHY |
| 3 | CAM_DP0 | D-PHY通道0（正极） | 输入，D-PHY |
| 4 | GND | - | 接地 |
| 5 | CAM_DN1 | D-PHY通道1（负向） | 输入，D-PHY |
| 6 | CAM_DP1 | D-PHY通道1（正向） | 输入，D-PHY |
| 7 | GND | - | 接地 |
| 8 | CAM_CN  | D-PHY 时钟（负极） | 输入，D-PHY |
| 9 | CAM_CP | D-PHY 时钟（正极） | 输入，D-PHY |
| 10 | GND | - | 接地 |
| 11 | CAM_DN2 | D-PHY 通道 2（负极） | 输入，D-PHY |
| 12 | CAM_DP2 | D-PHY 通道 2（正极）| 输入，D-PHY |
| 13 | GND | - | 接地 |
| 14 | CAM_DN3 | D-PHY通道3（负极） | 输入，D-PHY |
| 15 | CAM_DP3 | D-PHY通道3（正极） | 输入，D-PHY |
| 16 | GND | - | 接地 |
| 17 | CAM_IO0 | GPIO（例如电源使能） | 双向，3.3 V |
| 18 | CAM_IO1 | GPIO（例如时钟、LED） | 双向，3.3 V |
| 19 | GND | - | 接地 |
| 20 | SCL | I2C时钟 | 双向，3.3 V |
| 21 | SDA | I2C数据  双向，3.3 V |
| 22 | 3V3 | 3.3 V电源 | 输出 |




<Normal />
